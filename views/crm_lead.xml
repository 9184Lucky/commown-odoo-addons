<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <data>

    <!-- XXX used anyhow ? -->
    <record model="ir.ui.view" id="res_partner_risk_form">
      <field name="name">commown.lead.res.partner</field>
      <field name="model">res.partner</field>
      <field name="arch" type="xml">
        <form string="Lead Partner">
          <group>
            <field name="name"/>
            <field name="street"/>
            <field name="city"/>
          </group>
        </form>
      </field>
    </record>

    <record model="ir.ui.view" id="crm_case_form_view_oppor">
        <field name="name">commown.lead.form.opportunity</field>
        <field name="model">crm.lead</field>
        <field name="mode">primary</field> <!-- Crucial here: do not override the parent view -->
        <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
        <field name="arch" type="xml">
          <xpath expr="//div[@class='oe_title']//h2[@class='o_row']" position="attributes">
            <attribute name="invisible">1</attribute>
          </xpath>
          <xpath expr="//field[@name='user_id']/ancestor::group[1]" position="attributes">
            <attribute name="invisible">1</attribute>
          </xpath>
          <xpath expr="//field[@name='priority']/ancestor::group[1]" position="attributes">
            <attribute name="invisible">1</attribute>
          </xpath>
          <xpath expr="//field[@name='email_from']" position="attributes">
            <attribute name="invisible">1</attribute>
          </xpath>
          <xpath expr="//field[@name='phone']" position="attributes">
            <attribute name="invisible">1</attribute>
          </xpath>
          <xpath expr="//notebook/page[1]" position="before">
            <page name="before_call_risk_eval" string="Before call" autofocus="autofocus">
              <field name="web_searchurl"/>
              <group>
                <group name="email evaluation" >
                  <field name="email_rating" widget="priority"/>
                </group>
                <group name="web evaluation">
                  <field name="webid_unknown"/>
                  <field name="webid_rating" widget="priority"
                         attrs="{'invisible': [('webid_unknown', '=', True)]}"/>
                </group>
                <group>
                  <field name="webid_notes"/>
                </group>
              </group>
            </page>
            <page name="communication_process" string="Communication process">
              <group>
                <group name="normal_contacts" string="Normal contacts">
                  <field name="sent_collective_email"/>
                  <field name="first_phone_call"/>
                  <field name="second_phone_call"/>
                  <field name="email_boost"/>
                </group>
                <group name="conflicting_contacts" string="Conflicting contacts">
                  <field name="third_phone_call"/>
                  <field name="email_ultimatum"/>
                  <field name="registered_mail_sent"/>
                </group>
              </group>
            </page>
            <page name="phone_call" string="Phone call">
              <group name="product_data" string="Initial product data">
                <field name="orders_description" colspan="2" readonly="1"/>
              </group>
              <group name="personal_data" string="Initial personal data">
                <group>
                  <field readonly="1" name="contact_name"/>
                  <field readonly="1" name="street"/>
                  <field readonly="1" name="street2"/>
                  <field readonly="1" name="mobile"/>
                  <field readonly="1" name="partner_name" invisible="1"/>
                  <field readonly="1" name="function" invisible="1"/>
                  <field readonly="1" name="fax" invisible="1"/>
                </group>
                <group>
                  <field readonly="1" name="zip" class="oe_inline"/>
                  <field readonly="1" name="city"/>
                  <field readonly="1" name="state_id" invisible="1"/>
                  <field readonly="1" name="country_id"/>
                  <field readonly="1" name="email_from"/>
                </group>
                <group>
                  <field name="initial_data_notes" colspan="2"/>
                </group>
              </group>
              <group string="Marketing">
                <field name="campaign_id" />
                <field name="medium_id" />
                <field name="source_id" />
              </group>
              <group name="phonecall_validation" string="Phone call validation">
                <group>
                  <field name="identity_validated"/>
                  <field name="mobile_validated"/>
                  <field name="email_validated"/>
                </group>
                <group>
                  <field name="billing_address_validated"/>
                  <field name="delivery_address_validated"/>
                  <field name="address_hesitation"/>
                </group>
              </group>
              <group>
                <group name="technicalities" string="Technicalities">
                  <field name="technical_skills" widget="priority"/>
                  <field name="questions"/>
                </group>
                <group name="global_feeling" string="Global feeling">
                  <field name="global_feeling" widget="priority"/>
                  <field name="comments"/>
                </group>
              </group>
            </page>
            <page name="delivery" string="Delivery followup">
              <group>
                <group>
                  <field name="expedition_ref"/>
                  <field name="expedition_date"/>
                  <field name="delivery_date"/>
                </group>
                <group>
                  <field readonly="1" name="expedition_status"/>
                  <field readonly="1" name="expedition_status_fetch_date"/>
                </group>
              </group>
              <group>
                <field readonly="1" name="expedition_urgency_mail_sent"/>
              </group>
            </page>
          </xpath>
          <xpath expr="//notebook/page[@name='lead']" position="replace">
          </xpath>
        </field>
    </record>

  </data>

  <record id="action_print_fairphone_label" model="ir.actions.server">
    <field name="name">[commown] Print Fairphone parcel label(s)</field>
    <field name="model_id" ref="commown.model_crm_lead"/>
    <field name="sequence">5</field>
    <field name="state">code</field>
    <field name="code">
colissimo_data = {
            'colissimo_login': 'ColissimoLogin',
            'colissimo_password': 'ColissimoPassword',
            'colissimo_sender_email': 'test@test.com',
            'colissimo_commercial_name': 'CommercialName',
        }

attachment = records.with_context(colissimo_data).colissimo_fairphone_labels()

action = {
    "type": "ir.actions.act_url",
    "url": attachment.website_url,
    "target": "new",
    }
    </field>
  </record>

</odoo>
