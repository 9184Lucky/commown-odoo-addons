<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <template id="payment" inherit_id="website_sale.payment">
    <!-- Remove saved payment methods -->
    <xpath expr="//div[@id='payment_method']//li[@t-if='tokens']" position="replace">
    </xpath>
  </template>

  <template id="orders_followup_products_links"
            inherit_id="website_sale.orders_followup_products_links">

    <!-- Change link text to the product display name instead of the order
         line name which contains the whole product description, and
         move the latter to a fly-over icon -->
    <xpath expr="//div[@id='product_name']" position="replace">

      <div id="product_name" class="col-md-5">

        <t t-if="not ol.product_id.website_published">
          <span t-esc="ol.product_id.display_name"/>
        </t>
        <t t-else="">
          <a t-if="ol.product_id.website_published"
             t-att-href="ol.product_id.website_url">
            <span t-esc="ol.product_id.display_name"/>
          </a>
        </t>
        <div>
          <button type="button" class="btn btn-info btn-sm" data-toggle="modal"
                  t-attf-data-target="#myModal{{ol.id}}">
            Voir les détails
          </button>
        </div>

        <!-- Modal -->
        <div class="modal fade" t-attf-id="myModal{{ol.id}}"
             tabindex="-1" role="dialog">
          <div class="modal-dialog" role="document" style="width:80%">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close">
                  <span aria-hidden="true">x</span>
                </button>
                <h4 class="modal-title">
                  <t t-esc="ol.product_id.name"/>
                </h4>
              </div>
              <div class="modal-body">
                <t t-raw="ol.product_id.product_tmpl_id.website_description"/>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">
                  Fermer
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>

    </xpath>

  </template>

  <template id="product_price" inherit_id="product_rental.product_price">

    <xpath expr="div[@t-if='product.is_rental']" position="inside">
      <script type="text/javascript"
              src="/commown/static/src/js/website_sale.js"></script>
      <!-- Example usage
        <p class="bg-danger js-attribute-1-6 js-attribute-1-6-93 js-attribute-1-6-94 attribute-show" style="padding: 15px">
            <b>Important :</b> Avant de valider, veuillez lire les spécificités de l’offre en bas de cette page.
        </p>
        -->
    </xpath>
  </template>

  <template id="assets_frontend"
            inherit_id="website.assets_frontend">
    <xpath expr="." position="inside">
      <link href="/commown/static/src/css/website_sale.css"
            rel="stylesheet" type="text/css"/>
    </xpath>
  </template>

</odoo>
