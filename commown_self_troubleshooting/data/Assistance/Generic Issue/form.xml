<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record id="generic-issue" model="ir.ui.view">
    <field name="name">Self-troubleshoot Generic Issue</field>
    <field name="type">qweb</field>
    <field name="key">website.self-troubleshoot-generic-issue</field>
    <field name="arch" type="xml">

      <t t-name="website.self-troubleshoot-generic-issue">
        <t t-call="commown-self-troubleshoot.web-layout">
          <t t-set="title">Commown - Demande d'assistance</t>
          <t t-set="head">

            <script type="text/javascript">
              $(document).ready(function() {

                const wizard = setUpWizard($('#smartwizard'));

                $('input[type=radio][name=net_generic_issue]').change(function () {
                  wizard.toggleStep(2, this.value==='bug');
                  wizard.toggleStep(3, this.value==='broken');
                  wizard.toggleStep(4, this.value==='help');
                  wizard.toggleStep(5, this.value==='course');
                  wizard.toggleStep(6, this.value==='upgrade');
                });

              });
            </script>
          </t>
          <t t-set="issue_title">Demande d'assistance</t>
          <t t-set="issue_description_template">issue-description-generic-issue</t>
          <!-- Fin des variables à modifier -->

          <div class="container">
            <h1>Demande d'assistance</h1>
            <h2>Je rencontre un incident ou souhaite obtenir de l'assistance sur mon appareil</h2>
            <br />
            <form action="/self-troubleshoot/" method="post" accept-charset="utf-8" id="myForm" role="form">

              <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
              <input type="hidden" name="self-troubleshoot-type" id="self-troubleshoot-type" t-att-value="issue_title" />
              <input type="hidden" name="tags" id="tags" t-att-value="tag_names" />
              <input type="hidden" name="issue-description-template" id="issue-description-template" t-att-value="issue_description_template" />

              <div id="smartwizard">
                <ul>
                  <li>
                    <a href="#step-0">
                      Contexte
                      <br />
                      <small>Appareil concerné</small>
                    </a>
                  </li>
                  <li>
                    <a href="#step-1">
                      Étape 1
                      <br />
                      <small>Demande d'assistance</small>
                    </a>
                  </li>
                  <li disabled="disabled">
                    <a href="#step-2">Étape 2
                      <br/>
                      <small>Panne / bugs</small>
                    </a>
                  </li>
                  <li disabled="disabled">
                    <a href="#step-3">Étape 3
                      <br/>
                      <small>Casse</small>
                    </a>
                  </li>
                  <li disabled="disabled">
                    <a href="#step-4">Étape 4
                      <br/>
                      <small>Assistance à l'usage</small>
                    </a>
                  </li>
                  <li disabled="disabled">
                    <a href="#step-5">Étape 5
                      <br/>
                      <small>Formation</small>
                    </a>
                  </li>
                  <li disabled="disabled">
                    <a href="#step-6">Étape 6
                      <br/>
                      <small>Demande de matériel</small>
                    </a>
                  </li>
                </ul>

                <div>

                  <t t-call="commown_self_troubleshooting.step-contract-choice">
                      <t t-set="contracts"
                         t-value="env.user.partner_id.self_troubleshooting_contracts('generic-issue-page')"/>
                  </t>

                  <div id="step-1">
                    <h2>
                      Vous avez besoin d'une d'assistance car
                    </h2>
                    <p>
                      1/ Vous rencontrez un incident avec votre appareil (bug logiciel ou panne
                      matériel), choisissez l'option <strong>Panne / bugs</strong>
                    </p>
                    <p>
                      2/ Votre appareil a subi une chûte, est cassé ou a rencontre un dégât des eaux, choisissez
                      l'option <strong>Casse</strong>
                    </p>
                    <p>
                      3/ Vous avez besoin d'une assistance à l'usage de votre
                      appareil, choisissez l'option <strong>Assistance à l'usage</strong>
                    </p>
                    <p>
                      4/ Vous voulez faire valoir votre droit de formation Linux d'une heure
                      avec notre équipe, choisissez l'option <strong>Formation</strong>
                    </p>
                    <p>
                      5/ Vous souhaitez faire évoluer votre matériel (ajout de plus d'espace de
                      stockage, de RAM...), choisissez l'option <strong>Demande de matériel</strong>
                    </p>

                    <div id="form-step-1" role="form" data-toggle="validator">
                      <div class="form-group">
                        <label>Veuillez choisir entre une des ces cinq options</label>
                        <br />
                        <label class="radio-inline" for="net_bug">Panne / bugs</label>
                        <input type="radio" name="net_generic_issue" id="net_bug" value="bug" required="required"
                        data-required-error="Veuillez choisir une des cinq possibilités."/>
                        <label class="radio-inline" for="net_broken">Casse</label>
                        <input type="radio" name="net_generic_issue" id="net_broken" value="broken" required="required"
                        data-required-error="Veuillez choisir une des cinq possibilités."/>
                        <label class="radio-inline" for="net_help">Assistance à l'usage</label>
                        <input type="radio" name="net_generic_issue" id="net_help" value="help" required="required"
                        data-required-error="Veuillez choisir une des cinq possibilités."/>
                        <label class="radio-inline" for="net_course">Formation</label>
                        <input type="radio" name="net_generic_issue" id="net_course" value="course" required="required"
                        data-required-error="Veuillez choisir une des cinq possibilités."/>
                        <label class="radio-inline" for="net_upgrade">Demande de matériel</label>
                        <input type="radio" name="net_generic_issue" id="net_upgrade" value="upgrade" required="required"
                        data-required-error="Veuillez choisir une des cinq possibilités."/>
                        <div class="help-block with-errors"/>
                      </div>
                    </div>
                  </div>

                  <div id="step-2">
                    <p>Panne / bugs</p>
                  </div>

                  <div id="step-3">
                    <p>Casse</p>
                  </div>

                  <div id="step-4">
                    <p>Assistance à l'usage</p>
                  </div>

                  <div id="step-5">
                    <p>Formation</p>
                  </div>

                  <div id="step-6">
                    <p>Demande de matériel</p>
                  </div>

                </div>
              </div>
            </form>
          </div>

        </t>
      </t>

    </field>
  </record>

  <record id="generic-issue-page" model="website.page">
    <field name="website_published">True</field>
    <field name="url">/page/self-troubleshoot-generic-issue</field>
    <field name="view_id" ref="generic-issue" />
    <field name="website_meta_title">Demande d'assistance</field>
    <field name="website_meta_description">Je rencontre un incident ou souhaite obtenir de l'assistance sur mon appareil</field>
  </record>

</odoo>
